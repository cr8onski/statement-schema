{

    "$schema": "http://json-schema.org/draft-04/schema#",
    "description": "Schema for an xAPI Actor Property Agent",
    "id":"http://localhost:8080/agent.json",

    "type": "object",

    "additionalProperties": false,

    "properties": {
        "objectType": { "$ref": "#/definitions/objectType" },
        "name": { "$ref": "#/definitions/name" }
    },

    "oneOf": [
        { "$ref": "#/definitions/mbox" },
        { "$ref": "#/definitions/mbox_sha1sum" },
        { "$ref": "#/definitions/openid" },
        { "$ref": "#/definitions/account" }
    ],

    "definitions": {
        "iri": {
            "type": "string",
            "pattern": "^[\\S]+:\\/\\/?(?!\\/)[\\S]+$"
        },
        "objectType": { "type": "string" },
        "name": { "type": "string" },
        "mbox": {
            "type": "string",
            "pattern": "mailto:\\S+@\\S+\\.\\S+"
        },
        "mbox_sha1sum": {
            "type": "string"
        },
        "openid": { "$ref": "#/definitions/iri" },
        "account": {
            "type": "object",
            "properties": {
                "homePage": { "$ref": "#/definitions/iri" },
                "name": { "type": "string" }
            },
            "required": [ "homePage", "name" ]
        }
    }

}
