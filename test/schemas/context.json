{

    "$schema": "http://json-schema.org/draft-04/schema#",
    "description": "Schema for an xAPI Context Property",
    "id":"http://localhost:8080/context-schema.json",

    "type": "object",

    "additionalProperties": false,

    "properties": {
        "context": { "$ref": "#/definitions/context" }
    },

    "definitions": {

        "context": {
            "type": "object",
            "properties": {
                "registration": { "$ref": "#/definitions/uuid" },
                "instructor": { "$ref": "#/definitions/actor" },
                "team": { "$ref": "#/definitions/group" },
                "contextActivities": { "$ref": "#/definitions/contextActivities" },
                "revision": { "type": "string" },
                "platform": { "type": "string" },
                "language": {
                    "type": "string"
                },
                "statement": { "$ref": "#/definitions/statementRef" },
                "extensions": { "$ref": "#/definitions/extensions" }
            },
            "additionalProperties": false
        },
        "contextActivities": {
            "type": "object",
            "properties": {
                "parent": {
                    "oneOf": [
                        {"$ref": "#/definitions/arrayOfActivities" },
                        {"$ref": "#/definitions/activity" }
                    ]
                },
                "grouping": {
                    "oneOf": [
                        {"$ref": "#/definitions/arrayOfActivities" },
                        {"$ref": "#/definitions/activity" }
                    ]
                },
                "category": {
                    "oneOf": [
                        {"$ref": "#/definitions/arrayOfActivities" },
                        {"$ref": "#/definitions/activity" }
                    ]
                },
                "other": {
                    "oneOf": [
                        {"$ref": "#/definitions/arrayOfActivities" },
                        {"$ref": "#/definitions/activity" }
                    ]
                }
            },
            "additionalProperties": false
        },
        "arrayOfActivities": {
            "type": "array",
            "items": { "$ref": "#/definitions/activity" }
        },
        "uuid": {
            "type": "string",
            "pattern": "^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-5][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}$"
        },
        "actor": { "type": "object" },
        "group": { "type": "object" },
        "activity": { "type": "object" },
        "statementRef": { "type": "object" },
        "extensions": { "type": "object" }

    }
}
