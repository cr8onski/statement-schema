{

    "$schema": "http://json-schema.org/draft-04/schema#",
    "description": "Schema for an xAPI Actor Property Anonymous Group",
    "id":"http://localhost:8080/anongroup.json",

    "type": "object",

    "additionalProperties": false,

    "required": ["objectType", "member"],

    "properties": {
        "objectType": { "$ref": "#/definitions/objectType" },
        "name": { "$ref": "#/definitions/name" },
        "member": { "$ref": "#/definitions/member" }
    },

    "definitions": {
        "iri": {
            "type": "string",
            "pattern": "^[\\S]+:\\/\\/?(?!\\/)[\\S]+$"
        },
        "objectType": { "type": "string", "enum": ["Group"] },
        "name": { "type": "string" },
        "member": {
            "type": "array",
            "minItems": 1,
            "items": [
                {
                    "oneOf": [
                        { "required": ["mbox"] },
                        { "required": ["mbox_sha1sum"] },
                        { "required": ["openid"] },
                        { "required": ["account"] }
                    ]
                }
            ]
        },
        "mbox": {
            "type": "string",
            "pattern": "mailto:\\S+@\\S+\\.\\S+"
        },
        "mbox_sha1sum": {
            "type": "string"
        },
        "openid": { "$ref": "#/definitions/iri" },
        "account": {
            "type": "object",
            "properties": {
                "homePage": { "$ref": "#/definitions/iri" },
                "name": { "type": "string" }
            },
            "required": [ "homePage", "name" ]
        }
    }

}
